!function(t){"use strict";t.constraintText=function(t,e,i,n){let o;(n=n||{}).align=n.align||"left",n.indent=n.indent||0,n.maxWidth=n.maxWidth||0,n.maxHeight=n.maxHeight||0,n.lineBreakFactor=n.lineBreakFactor||0,void 0===n.lineBreakCharacte&&(n.lineBreakCharacter="-"),void 0===n.lineHeightFactor&&(n.lineHeightFactor=1.15),n.color&&(o=this.getTextColor(),this.setTextColor(n.color)),n.maxWidth>0&&n.indent>=n.maxWidth&&(console.error("Option indent ("+n.indent+") is greather or equals to maxWidth ("+n.maxWidth+') for text "'+t+'".'),n.indent=0),(n.maxWidth<0||n.maxHeight<0)&&console.error('MaxWidth or MaxHeight is lower than 0 for text "'+t+'".');const h=this.getTextDimensions("A").h*n.lineHeightFactor,l=n.maxHeight>0?Math.floor(n.maxHeight/h):-1,a=t.split(" "),r=this.getTextWidth(" ");let s=0,g=0;for(;a.length&&(l<=-1||s<l);){let t=s?0:n.indent,o=n.maxWidth-t,l=0,d=[],c=!1;for(;a.length&&!c;){let t=a[0];const e=this.getTextWidth(t),i=d.length>=1?d.length*r:0;if(l+i+e<=o)d.push(t),a.shift(),l+=e;else if(l<=.7*o&&(0===d.length||a.length>1)){let e="",h=0;for(;l+i+h<=o||!d.length&&""===e;)e+=t.charAt(0),h=this.getTextWidth(e+n.lineBreakCharacter),a[0]=t=t.substring(1);t.length>1?(d.push(e+n.lineBreakCharacter),l+=h,c=!0):(d.push(e+t),l+=this.getTextWidth(e+t),a.shift())}else c=!0}if(g<l&&(g=l),!n.noDisplay){const a=d.length>1?(d.length-1)*r:0;let g=e+t,x=i+s*h;"center"===n.align?g+=(o-l-a)/2:"right"===n.align&&(g+=o-l-a);const m="justify"===n.align&&c?(o-l)/(d.length-1):r;d.every(t=>(this.text(t,g,x,{lineHeightFactor:n.lineHeightFactor,baseline:"top"}),g+=this.getTextWidth(t)+m,!0))}s++}return o&&this.setTextColor(o),{height:s*h,bottom:i+s*h,remainingText:a.length?a.join(" "):null,lines:s,width:g,right:i+g,maxWordWidth:0}},t.registerContextableFunction&&t.registerContextableFunction("constraintText",[,1]),t.constraintTable=function(t,e,i,n){(n=n||{}).padding||(n.padding=.5),n.color||(n.color=NORMAL_COLOR),n.tintColor||(n.tintColor=TINT_COLOR),this.setDrawColor(n.color),n.noDisplay||this.line(e,i,e+n.maxWidth,i);const o=Math.max.apply(null,t.map(t=>t.length)),h=[],l=[];for(let e=0;e<t.length;e++){const i=t[e];for(let t=0;t<i.length;t++){const e=i[t],n="string"==typeof e?e:e.text,o=this.constraintText(n,0,0,{noDisplay:!0});h[t]||(h[t]=0,l[t]=0),h[t]<o.width&&(h[t]=o.width),l[t]<o.maxWordWidth&&(l[t]=o.maxWordWidth)}}let a=h,r=a.reduce((t,e)=>t+e,0);r>n.maxWidth&&(r=(a=l).reduce((t,e)=>t+e,0));const s=(n.maxWidth-r)/o;let g=a.map((t,e)=>t+s),d=i;for(let i=0;i<t.length;i++){const o=t[i];d+=n.padding;let h=0;for(let t=0,i=e+n.padding;t<o.length;i+=g[t],t++){const e=o[t],l="string"==typeof e?e:e.text,a="string"==typeof e||"title"!==e.type?n.color:n.tintColor,r=g[t]-2*n.padding,s=this.constraintText(l,i,d,{maxWidth:r,align:n.align,color:a,noDisplay:n.noDisplay});s.height>h&&(h=s.height)}d+=h,d+=n.padding,n.noDisplay||this.line(e,d,e+n.maxWidth,d)}const c=d-i;if(!n.noDisplay)for(let t=0,n=e;t<=o;n+=g[t],t++)this.line(n,i,n,i+c);return{height:c,bottom:i+c,tooBig:n.maxHeight&&c>n.maxHeight}},t.registerContextableFunction&&t.registerContextableFunction("constraintTable",[,1])}(jspdf.jsPDF.API);